webpackJsonp([9,1],{79:function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){var t=Math.floor(e/3600);e-=3600*t;var n=Math.floor(e/60);return e-=60*n,d("%02d%02d%02d",t,n,e)}var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},c=n(16),u=window.tongji=n(80),d=n(20);netmsg.on("rechargeComplete",null,function(e){u.endCharge(e.orderid,e.money,"appleStore")}),e.exports=function(e){function t(){i(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"appleStoreRc"));return e._timer=null,e}return r(t,e),l(t,[{key:"hide",value:function(){this._timer&&((0,c.clearInterval)(this._timer),this._timer=null),s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"hide",this).call(this)}},{key:"refreshTimer",value:function(e){for(var t=this.contentPane,n=a(e),i=0;i<6;i++)t.getChild("n"+(28+i)).text=n[i]}},{key:"onInit",value:function(){function e(){(0,c.clearInterval)(i._timer),i._timer=null,i.contentPane.getChild("n14").onClick(null,function(){_socket.sendp({c:"applestore.freecoin"}),tipon("恭喜您获得10000金币").popup(),_socket.sendp({c:"applestore.cd"}),netmsg.once("applestore.cd",this,n)})}function n(t){return fairygui.GRoot.inst.closeModalWait(),i.refreshTimer(t.sec),t.sec<=0?e():void(i._timer=(0,c.setInterval)(function(){t.sec--,0==t.sec&&e(),t.sec<0||i.refreshTimer(t.sec)},1e3))}s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onInit",this).call(this);var i=this;fairygui.GRoot.inst.showModalWait(),_socket.sendp({c:"applestore.cd"}),netmsg.once("applestore.cd",this,n)}}]),t}(wins.Win)},80:function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(){}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=window.TDGA;a||(a={Account:i,onPageLeave:i,onReward:i,onChargeRequest:i,onChargeSuccess:i,onItemPurchase:i,onMissionBegin:i,onMissionCompleted:i,onEvent:i},a.Account.setLevel=i);var l=function(){function e(){n(this,e),this._delayOp=[],this._inited=!0}return r(e,[{key:"init",value:function(e){this._inited=!0}},{key:"_delay",value:function(e){return this._inited?void e():this._delayOp.push({f:e})}},{key:"userin",value:function(e){this._delay(function(){var t=0;if(window.cordova){var n={Android:1,"BlackBerry 10":2,browser:3,iOS:4,WinCE:5,Tizen:6,"Mac OS X":7};t=n[device.platform]||8}else"wechat"==startup_param.pf&&(t=101);a.Account({accountId:e.id,level:e.level,accountName:e.nickname,gameServer:"通用",accountType:t,gender:startup_param.sex})})}},{key:"userout",value:function(){this._delay(a.onPageLeave.bind(a))}},{key:"levelup",value:function(e){this._delay(a.Account.setLevel.bind(a.Account,e))}},{key:"reward",value:function(e,t){this._delay(a.onReward.bind(a,e,t))}},{key:"beginCharge",value:function(e,t,n,i,o){"string"==typeof n&&(o=i,i=n,n=Math.floor(t/3)),this._delay(function(){a.onChargeRequest({orderId:e,iapId:i,currencyAmount:t,currencyType:"CNY",virtualCurrencyAmount:n,paymentType:o})})}},{key:"endCharge",value:function(e,t){this._delay(function(){a.onChargeSuccess({orderId:e,paymentType:t})})}},{key:"enterGame",value:function(e){this._delay(function(){a.onMissionBegin(e.toString())})}},{key:"startGame",value:function(e,t,n){this._delay(function(){a.onItemPurchase({item:t,itemNumber:1,priceInVirtualCurrency:n}),a.onEvent(t,{})})}},{key:"endGame",value:function(e){this._delay(function(){a.onMissionCompleted(e.toString())})}},{key:"share",value:function(){this._delay(function(){a.onEvent("share",{user:{id:me.id,nickname:me.nickname}})})}},{key:"invite",value:function(e,t){this._delay(function(){a.onEvent("invite",{user:{id:me.id,nickname:me.nickname},table:{id:e,msg:t}})})}},{key:"event",value:function(e,t){this._delay(function(){a.onEvent(e,"object"==("undefined"==typeof t?"undefined":o(t))?t:{data:t})})}}]),e}(),s=new l;window.onunload=s.userout.bind(s),e.exports=s},157:function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e){return e.charAt(0).toUpperCase()+e.slice(1)}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(15),l=n(76),s=n(20),c=(n(19),n(25),n(10)),u=n(95),d=n(158),h=d.BeadPlate,f=d.BigRoad,g=d.BigEye,v=laya.net.Loader,p=laya.utils.Handler,m=function(){function e(t){i(this,e),this.opt=t}return r(e,[{key:"renderTables",value:function(e,t){var n=this.tables[e];t.getChild("n94").text=s("房间%s",n.roomid),t.getChild("n95").text=s("限红：%d-%d",n.minZhu,n.maxZhu),t.getChild("n85").text="-",t.getChild("n87").text="-",t.getChild("n89").text="-",t.getChild("n91").text=n.online;var i=t.getChild("n93");i.offClick(t,t._clickHandler),t._clickHandler=function(){_socket.sendp({c:"join",code:n.roomid})},i.onClick(t,t._clickHandler);var o=n.his;new h(t.getChild("n17").getChild("n1")).refreshRoad(n.his);var r=new f(t.getChild("n19").getChild("n19"));r.refreshRoad(n.his);var a=r.logicalRoad(n.his);new g(t.getChild("n20").getChild("n20")).refreshRoad(a),new g(t.getChild("n22").getChild("n23"),2).refreshRoad(a),new g(t.getChild("n23").getChild("n23"),3).refreshRoad(a);for(var l=0,c=0,u=0,d=0,v=0,p=0,m=0;m<o.length;m++)"banker"==o[m].win?l++:"player"==o[m].win?c++:u++,o[m].bankerPair&&d++,o[m].playerPair&&v++,o[m].playerTian&&p++,o[m].bankerTian&&p++;t.getChild("n85").text=l,t.getChild("n87").text=c,t.getChild("n89").text=u}},{key:"assignAllBtns",value:function(){for(var e=this,t=this._view._children,n=/[A-Za-z]\d+/,i=0;i<t.length;i++){var r=t[i].asButton;if(r instanceof fairygui.GButton){var a=function(){if(n.test(r.name))return"continue";var t=r.name.split("."),i=t[1]||1;t=t[0];var a=e._view.getController(t);a?(r.onClick(e,function(){a.selectedIndex=i}),a.setSelectedIndex(0)):r.onClick(e,function(){var e=o(t)+"Win";if(u[e])var n=new u[e];else var n=new u.Win(t);n.modal=!0,n.show()})}();if("continue"===a)continue}}}},{key:"active",value:function(){fairygui.GRoot.inst.showModalWait(),_socket.sendp({c:"alltables"}),netmsg.once("alltables",this,function(e){fairygui.GRoot.inst.closeModalWait(),console.log(e),this.tables=[];for(var t in e.tables)e.tables[t].roomid=t,this.tables.push(e.tables[t]);var n=this._view.getChild("n39").asList,i=this.tables.length;i!=n.numItems?n.numItems=i:n.refreshVirtualList()})}},{key:"deactive",value:function(){}}],[{key:"create",value:function(t,i){"function"==typeof t&&(i=t,t={}),a.parallel([function(e){Laya.loader.load([{url:n(149),type:v.IMAGE},{url:n(159),type:v.IMAGE},{url:n(160),type:v.IMAGE},{url:n(151),type:v.BUFFER}],p.create(null,function(){e()}))},function(e){var t=/Android|webOS|iPhone|iPad|iPod|Opera Mini/i.exec(navigator.userAgent);t||(t="pc"),_socket.sendp({c:"rc.querymethod",inapp:startup_param.inApp,device:t}),netmsg.once("rc.querymethod",null,function(t){e(null,t)})}],function(o,r){window.magiclink&&magiclink.reg(function(e){console.log("magiclink ret",e),_socket.sendp({c:"join",code:e})});var a=new e(t);fairygui.UIPackage.addPackage("baccarat"),fairygui.UIConfig.buttonSound=null,fairygui.UIConfig.buttonSoundVolumeScale=0;var s=fairygui.UIPackage.createObject("Package1","大厅").asCom,d=r[1];"appleStorePayItem"==d.method&&(s.getController("c1").selectedIndex=1,s.getChild("n61").onClick(null,function(){var e=n(79),t=new e;t.show()})),a._view=s,a.usernick=s.getChild("n4").asTextField,a.usericon=s.getChild("account").getChild("n3").asLoader,a.usericon.onClick(null,function(){var e=new u.AccountWin;e.modal=!0,e.show()}),a.assignAllBtns(),l.removeAllListeners("nicknamechgd").on("nicknamechgd",function(){a.usernick.text=l.nickname}),l.removeAllListeners("facechgd").on("facechgd",function(){l.face&&(a.usericon.url=l.face)}),l.removeAllListeners("coinschgd").on("coinschgd",function(){s.getChild("n10").asTextField.text=l.coins||0});var h=s.getChild("n39").asList;h.setVirtual(),h.itemRenderer=p.create(a,a.renderTables,null,!1),h.numItems=0,s.getChild("n45").onClick(null,function(){if(0!=a.tables.length){var e=c(a.tables);e.sort(function(e,t){return t.minZhu-e.minZhu});for(var t=0;t<e.length;t++)if(l.coins>e[t].minZhu)return _socket.sendp({c:"join",code:e[t].roomid});_socket.sendp({c:"join",code:e[t-1].roomid})}}),i(null,a)})}}]),e}();e.exports=m.create},158:function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(96),l=function(){function e(t){i(this,e),this.view=t,this.roadBeadPlate=t.getChildAt(0).asCom,this.cols=this._orgCols=Math.max(9,Math.ceil(this.view.width/27)),this.roadBeadPlate.getChild("n90").asList.removeChildren()}return r(e,[{key:"refreshRoad",value:function(e){var t=this.roadBeadPlate.getChild("n90").asList;t.removeChildren();var n=Math.floor(e.length/6)+1,i=Math.max(n,this._orgCols);this.cols=i,n>=this._orgCols?this.view.scrollPane.setPosX(this.roadBeadPlate.width-this.view.width):this.view.scrollPane.setPosX(0);for(var o=t._children.length;o<e.length;o++){var r=fairygui.UIPackage.createObject("Package1","路格1"),a=e[o],l=r.getController("c1");if(l.selectedIndex=0,!a)return;"banker"==a.win?l.selectedIndex=1:"player"==a.win?l.selectedIndex=2:l.selectedIndex=3,a.demo?r.getTransition("t0").play():r.getTransition("t0").stop(),r.getChild("n6").visible=a.bankerPair,r.getChild("n7").visible=a.playerPair,t.addChild(r)}}},{key:"cols",get:function(){return this._cols},set:function(e){this._cols=e,this.roadBeadPlate.width=28*this._cols+1}}]),e}(),s=function(){function e(t){i(this,e),this.view=t,this.roadBig=t.getChildAt(0).asCom,this.cols=this._orgCols=Math.max(24,Math.ceil(this.view.width/13))}return r(e,[{key:"bigRoad",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=(t.columns,t.rows),i=void 0===n?6:n,o=[],r={},l=0,s=void 0,c=[],u=0;return e.forEach(function(e){if("tie"===e.win)o.push(e);else{if(s){var t=a.last(c);"tie"===s.win&&t&&(t.ties=a.cloneDeep(o),o=[],s=t.result),t&&s.win&&s.win!==e.win&&l++}for(var n=l,d=0,h=!1;!h;){var f=n+"."+d,g=n+"."+(d+1);if(a.get(r,f))d+1>=i?n++:a.get(r,g)?a.get(r,g).result.win===e.win?d++:n++:d++;else{var v=a.merge({},{row:d,column:n,logicalColumn:l,ties:a.cloneDeep(o)},{result:e});a.set(r,f,v),c.push(r[n][d]),h=!0}}o=[],u=Math.max(u,n)}s=e}),a.isEmpty(c)&&o.length>0?c.push({ties:a.cloneDeep(o),column:0,row:0,logicalColumn:0,result:{}}):!a.isEmpty(c)&&o.length&&(a.last(c).ties=a.cloneDeep(o)),c.maximumColumnReached=u,c}},{key:"logicalRoad",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=(t.columns,t.rows,[]),i=0,o=void 0;return e.forEach(function(e){"tie"!==e.win&&(o&&o.win&&o.win!==e.win&&i++,n[i]?n[i].push({result:e}):n[i]=[{result:e}],o=e)}),n}},{key:"refreshRoad",value:function(e){var t=this.roadBig,n=this.bigRoad(e),i=Math.max(n.maximumColumnReached,this._orgCols);this.cols=2*Math.floor(i/2)+2,n.maximumColumnReached>=this._orgCols?this.view.scrollPane.setPosX(this.roadBig.width-this.view.width):this.view.scrollPane.setPosX(0),t.removeChildren(2);for(var o=0;o<n.length;o++){var r=fairygui.UIPackage.createObject("Package1","路格2"),a=n[o].result,l=r.getController("c1");null==a.win?l.selectedIndex=0:"banker"==a.win?l.selectedIndex=1:"player"==a.win&&(l.selectedIndex=2),a.demo?r.getTransition("t0").play():r.getTransition("t0").stop(),r.getChild("n68").visible=a.bankerPair,r.getChild("n69").visible=a.playerPair,r.getChild("n72").visible=null!=n[o].ties&&n[o].ties.length>0,r.x=14*n[o].column+2,r.y=14*n[o].row+2,t.addChild(r)}}},{key:"cols",get:function(){return this._cols},set:function(e){this._cols=e,this.roadBig.width=14*this._cols+1}}]),e}(),c=function(){function e(t,n,o){i(this,e),this.view=t,this.road=t.getChildAt(0).asCom,this.circle=n||1,this.cols=this._orgCols=o||Math.max(24,Math.ceil(this.view.width/7))}return r(e,[{key:"makeResult",value:function(e,t){return e<=t?"red":e==t+1?"blue":"red"}},{key:"reverseResult",value:function(e){return"red"==e?"blue":"red"}},{key:"bigEye",value:function(e,t){for(var n=[],i=this.circle;i<e.length;i++){var o=e[i],r=i-this.circle,a=e[r].length-1,l=r-1;if(l>=0){var s=e[l].length-1,c=a+1;n.push(this.reverseResult(this.makeResult(c,s)))}for(var u=1;u<o.length;u++)n.push(this.makeResult(u,a))}return n[n.length-1]={color:n[n.length-1],isDemo:t},this.turn2Map(n)}},{key:"turn2Map",value:function(e){var t=6,n={},i=0,r=void 0,l=[],s=0;return e.forEach(function(e){var c;"object"==("undefined"==typeof e?"undefined":o(e))&&(c=e.isDemo,e=e.color),r&&r!=e&&i++;for(var u=i,d=0,h=!1;!h;){var f=u+"."+d,g=u+"."+(d+1);if(a.get(n,f))d+1>=t?u++:a.get(n,g)?a.get(n,g).result===e?d++:u++:d++;else{var v=a.merge({},{row:d,column:u,logicalColumn:i},{result:e,isDemo:c});a.set(n,f,v),l.push(n[u][d]),h=!0}}r=e,s=Math.max(s,u)}),l.maximumColumnReached=s,l}},{key:"refreshRoad",value:function(e,t){var n=this.road,i=this.bigEye(e,t),o=Math.max(i.maximumColumnReached,this._orgCols);this.cols=2*Math.round(o/2+1),i.maximumColumnReached>=this._orgCols?this.view.scrollPane.setPosX(n.width-this.view.width):this.view.scrollPane.setPosX(0),n.removeChildren(2);for(var r=0;r<i.length;r++){var a=fairygui.UIPackage.createObject("Package1","路格"+(2+this.circle)),l=i[r].result,s=i[r].isDemo,c=a.getController("c1");"red"==l?c.selectedIndex=0:c.selectedIndex=1,s?a.getTransition("t0").play():a.getTransition("t0").stop(),a.x=7*i[r].column+1,a.y=7*i[r].row+1,n.addChild(a)}}},{key:"cols",get:function(){return this._cols},set:function(e){this._cols=e,this.road.width=7*this._cols+1}}]),e}();e.exports={BeadPlate:l,BigRoad:s,BigEye:c}},159:function(e,t,n){e.exports=n.p+"baccarat@atlas1.png?06e0d6eddbb09cabb80b490997600f65"}});